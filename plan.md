# SNS投稿Webアプリケーション実装計画

## 1. 概要
Google Apps Scriptを使用したWebアプリケーションで、複数のSNS（X、Threads、Instagram）への投稿を一元管理できるシステムを構築します。

## 2. 機能要件

### 2.1 基本機能
- テキスト投稿内容の入力
- 画像・動画ファイルのアップロード
- SNS選択（チェックボックス）
- 文字数カウント表示
- エラー表示とログ出力

### 2.2 制限事項
- 画像：最大4枚（Xの制限に準拠）
- 動画：最大1本
- ファイルサイズ制限：
  - 画像：制限なし（Google Driveの制限に準拠）
  - 動画：30MB以下

## 3. 技術構成

### 3.1 フロントエンド
- HTML5
- Tailwind CSS（UIフレームワーク）
- JavaScript
- レスポンシブデザイン（モバイルファースト）

### 3.2 バックエンド
- Google Apps Script
- 既存のSNS投稿機能（post.js, googleDrive.js）を直接利用
  - 既存コードの修正は禁止
  - 新規関数でのラッピングは可能

## 4. 画面構成

### 4.1 メイン画面（index.html）
1. ヘッダー
   - アプリケーションタイトル
   - バージョン情報

2. 投稿内容入力エリア
   - テキストエリア（モバイル対応の高さ調整）
   - リアルタイム文字数カウンター
   - SNS選択チェックボックス（X, Threads, Instagram）

3. ファイルアップロードエリア
   - 画像アップロードセクション（最大4枚）
     - ドラッグ&ドロップ対応
     - ファイル選択ボタン
     - プレビュー表示（グリッドレイアウト）
     - 削除ボタン
   - 動画アップロードセクション（最大1本）
     - ドラッグ&ドロップ対応
     - ファイル選択ボタン
     - プレビュー表示（サムネイル+再生ボタン）
     - 削除ボタン

4. エラー表示エリア
   - エラーメッセージ表示（アラート形式）
   - エラーログ表示（折りたたみ可能）
   - サポート連絡先情報

5. 操作ボタン
   - 投稿実行ボタン（プライマリカラー）
   - リセットボタン（セカンダリカラー）

### 4.2 エラー表示モーダル
- エラー内容の詳細表示
- エラーログのコピーボタン
- サポート連絡先情報

## 5. 実装手順

### 5.1 バックエンド実装
1. `doGet`関数の実装
   - Webアプリケーションのエントリーポイント
   - HTMLテンプレートの読み込み

2. ファイルアップロード処理
   - 既存の`googleDrive.js`の機能を直接利用
   - エラーハンドリングのラッパー関数作成

3. 投稿処理
   - 既存の`post.js`の`executePost`関数を直接利用
   - エラーハンドリングのラッパー関数作成

### 5.2 フロントエンド実装
1. HTMLテンプレート作成
   - Tailwind CSSを使用したモバイルファーストデザイン
   - フォーム要素の配置
   - エラー表示エリアの実装

2. JavaScript実装
   - ファイルアップロード処理
     - ドラッグ&ドロップ対応
     - ファイル選択ダイアログ
     - プレビュー表示
     - ファイル削除機能
   - 文字数カウント
   - エラーハンドリング
   - API通信処理

3. レスポンシブ対応
   - モバイルファーストのデザイン
   - タブレット対応
   - デスクトップ対応

## 6. エラーハンドリング

### 6.1 想定されるエラー
- ファイルアップロードエラー
- SNS認証エラー
- 投稿処理エラー
- ネットワークエラー

### 6.2 エラー処理方針
- ユーザーフレンドリーなエラーメッセージ
- エラーログの詳細表示
- サポート連絡先の明示
- エラーログのコピー機能

## 7. セキュリティ対策
- ファイルアップロードの検証
- SNS認証情報の保護
- エラーメッセージの適切な表示

## 8. テスト計画
1. 単体テスト
   - ファイルアップロード機能
   - 文字数カウント機能
   - エラー表示機能

2. 結合テスト
   - 投稿処理全体の動作確認
   - エラーハンドリングの確認

3. クロスデバイステスト
   - スマートフォンでの動作確認
   - タブレットでの動作確認
   - デスクトップでの動作確認

## 9. デプロイ計画
1. 開発環境での動作確認
2. 本番環境へのデプロイ
3. 動作確認とバグ修正

## 10. 今後の拡張性
- 投稿予約機能の追加
- 複数アカウント対応
- 投稿履歴の管理
- 統計情報の表示 